openapi: 3.0.3

info:
  title: Anthropic API
  description: API Spec for Anthropic API. Please see https://docs.anthropic.com/en/api for more details.
  version: "1"

servers:
  - url: https://api.anthropic.com/v1

tags:
  - name: Messages
    description: Send a structured list of input messages with text and/or image content, and the model will generate the next message in the conversation.
  - name: Models
    description: List and retrieve information about available models.

paths:
  /messages:
    post:
      operationId: createMessage
      tags:
        - Messages
      summary: Create a Message
      description: |
        Send a structured list of input messages with text and/or image content, and the
        model will generate the next message in the conversation.

        The Messages API can be used for either single queries or stateless multi-turn
        conversations.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMessageRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Message"
  /messages/count_tokens:
    post:
      operationId: countMessageTokens
      tags:
        - Messages
      summary: Count Message Tokens
      description: |
        Count the number of tokens in a Message.

        The Token Count API can be used to count the number of tokens in a Message,
        including tools, images, and documents, without creating it.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CountMessageTokensRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CountMessageTokensResponse"
  /messages/batches:
    get:
      operationId: listMessageBatches
      tags:
        - Messages
      summary: List Message Batches
      description: |
        List all Message Batches within a Workspace. Most recently created batches are
        returned first.
      parameters:
        - name: before_id
          in: query
          required: false
          description: |
            ID of the object to use as a cursor for pagination. When provided, returns the
            page of results immediately before this object.
          schema:
            type: string
        - name: after_id
          in: query
          required: false
          description: |
            ID of the object to use as a cursor for pagination. When provided, returns the
            page of results immediately after this object.
          schema:
            type: string
        - name: limit
          in: query
          required: false
          description: |
            Number of items to return per page. Defaults to 20. Ranges from 1 to 100.
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListMessageBatchesResponse"
    post:
      operationId: createMessageBatch
      tags:
        - Messages
      summary: Create a Message Batch
      description: Send a batch of Message creation requests.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMessageBatchRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageBatch"
  /messages/batches/{id}:
    get:
      operationId: retrieveMessageBatch
      tags:
        - Messages
      summary: Retrieve a Message Batch
      description: |
        This endpoint is idempotent and can be used to poll for Message Batch
        completion. To access the results of a Message Batch, make a request to the
        `results_url` field in the response.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the message batch to retrieve.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageBatch"
    delete:
      operationId: deleteMessageBatch
      tags:
        - Messages
      summary: Delete a Message Batch
      description: |
        Delete a Message Batch.

        Message Batches can be deleted at any time. Once a batch is deleted, it is no
        longer available and all associated results will be removed.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the message batch to delete.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteMessageBatchResponse"
  /messages/batches/{id}/results:
    get:
      operationId: getMessageBatchResults
      tags:
        - Messages
      summary: Get Message Batch Results
      description: |
        Streams the results of a Message Batch as a `.jsonl` file.

        Each line in the file is a JSON object containing the result of a single
        request in the Message Batch. Results are not guaranteed to be in the same
        order as requests. Use the `custom_id` field to match results to requests.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the message batch to retrieve results for.
      responses:
        "200":
          description: OK
          content:
            application/x-jsonl:
              schema:
                $ref: "#/components/schemas/MessageBatchIndividualResponse"
  /messages/batches/{id}/cancel:
    post:
      operationId: cancelMessageBatch
      tags:
        - Messages
      summary: Cancel a Message Batch
      description: |
        Batches may be canceled any time before processing ends. Once cancellation
        is initiated, the batch enters a `canceling` state, at which time the system
        may complete any in-progress, non-interruptible requests before finalizing
        cancellation.

        The number of canceled requests is specified in `request_counts`. To
        determine which requests were canceled, check the individual results within
        the batch. Note that cancellation may not result in any canceled requests
        if they were non-interruptible.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the message batch to cancel.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageBatch"
  /models:
    get:
      operationId: listModels
      tags:
        - Models
      summary: List Models
      description: |
        List available models. The Models API response can be used to determine
        which models are available for use in the API.
      parameters:
        - name: before_id
          in: query
          required: false
          description: |
            ID of the object to use as a cursor for pagination. When provided, returns the
            page of results immediately before this object.
          schema:
            type: string
        - name: after_id
          in: query
          required: false
          description: |
            ID of the object to use as a cursor for pagination. When provided, returns the
            page of results immediately after this object.
          schema:
            type: string
        - name: limit
          in: query
          required: false
          description: |
            Number of items to return per page. Defaults to 20. Ranges from 1 to 1000.
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 20
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListModelsResponse"
  /models/{model_id}:
    get:
      operationId: retrieveModel
      tags:
        - Models
      summary: Retrieve a Model
      description: |
        Get a specific model. The Models API response can be used to determine
        information about a specific model or resolve a model alias to a model ID.
      parameters:
        - name: model_id
          in: path
          required: true
          schema:
            type: string
          description: The model ID or alias.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ModelInfo"

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: x-api-key

  schemas:
    CreateMessageRequest:
      type: object
      description: The request parameters for creating a message.
      properties:
        model:
          title: Model
          description: |
            The model that will complete your prompt.

            See [models](https://docs.anthropic.com/en/docs/models-overview) for additional
            details and options.
          example: "claude-3-5-sonnet-20241022"
          anyOf:
            - type: string
              description: The ID of the model to use for this request.
            - type: string
              title: Models
              description: |
                Available models. Mind that the list may not be exhaustive nor up-to-date.
              enum:
                - claude-opus-4-20250514
                - claude-sonnet-4-20250514
                - claude-3-7-sonnet-latest
                - claude-3-7-sonnet-20250219
                - claude-3-5-sonnet-latest
                - claude-3-5-sonnet-20241022
                - claude-3-5-sonnet-20240620
                - claude-3-5-haiku-latest
                - claude-3-5-haiku-20241022
                - claude-3-opus-latest
                - claude-3-opus-20240229
                - claude-3-sonnet-20240229
                - claude-3-haiku-20240307
                - claude-2.1
                - claude-2.0
        messages:
          type: array
          description: |
            Input messages.

            Our models are trained to operate on alternating `user` and `assistant`
            conversational turns. When creating a new `Message`, you specify the prior
            conversational turns with the `messages` parameter, and the model then generates
            the next `Message` in the conversation.

            Each input message must be an object with a `role` and `content`. You can
            specify a single `user`-role message, or you can include multiple `user` and
            `assistant` messages. The first message must always use the `user` role.

            If the final message uses the `assistant` role, the response content will
            continue immediately from the content in that message. This can be used to
            constrain part of the model's response.
            
            See [message content](https://docs.anthropic.com/en/api/messages-content) for
            details on how to construct valid message objects.

            Example with a single `user` message:

            ```json
            [{ "role": "user", "content": "Hello, Claude" }]
            ```

            Example with multiple conversational turns:

            ```json
            [
              { "role": "user", "content": "Hello there." },
              { "role": "assistant", "content": "Hi, I'm Claude. How can I help you?" },
              { "role": "user", "content": "Can you explain LLMs in plain English?" }
            ]
            ```

            Example with a partially-filled response from Claude:

            ```json
            [
              {
                "role": "user",
                "content": "What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun"
              },
              { "role": "assistant", "content": "The best answer is (" }
            ]
            ```

            Each input message `content` may be either a single `string` or an array of
            content blocks, where each block has a specific `type`. Using a `string` for
            `content` is shorthand for an array of one content block of type `"text"`. The
            following input messages are equivalent:

            ```json
            { "role": "user", "content": "Hello, Claude" }
            ```

            ```json
            { "role": "user", "content": [{ "type": "text", "text": "Hello, Claude" }] }
            ```

            Starting with Claude 3 models, you can also send image content blocks:

            ```json
            {
              "role": "user",
              "content": [
                {
                  "type": "image",
                  "source": {
                    "type": "base64",
                    "media_type": "image/jpeg",
                    "data": "/9j/4AAQSkZJRg..."
                  }
                },
                { "type": "text", "text": "What is in this image?" }
              ]
            }
            ```

            We currently support the `base64` source type for images, and the `image/jpeg`,
            `image/png`, `image/gif`, and `image/webp` media types.

            See [examples](https://docs.anthropic.com/en/api/messages-examples) for more
            input examples.

            Note that if you want to include a
            [system prompt](https://docs.anthropic.com/en/docs/system-prompts), you can use
            the top-level `system` parameter — there is no `"system"` role for input
            messages in the Messages API.
          minItems: 1
          items:
            $ref: '#/components/schemas/Message'
        max_tokens:
          type: integer
          description: |
            The maximum number of tokens to generate before stopping.

            Note that our models may stop _before_ reaching this maximum. This parameter
            only specifies the absolute maximum number of tokens to generate.

            Different models have different maximum values for this parameter. See
            [models](https://docs.anthropic.com/en/docs/models-overview) for details.
        metadata:
          $ref: '#/components/schemas/CreateMessageRequestMetadata'
        stop_sequences:
          type: array
          description: |
            Custom text sequences that will cause the model to stop generating.

            Our models will normally stop when they have naturally completed their turn,
            which will result in a response `stop_reason` of `"end_turn"`.

            If you want the model to stop generating when it encounters custom strings of
            text, you can use the `stop_sequences` parameter. If the model encounters one of
            the custom sequences, the response `stop_reason` value will be `"stop_sequence"`
            and the response `stop_sequence` value will contain the matched stop sequence.
          items:
            type: string
        system:
          type: string
          description: |
            System prompt.

            A system prompt is a way of providing context and instructions to Claude, such
            as specifying a particular goal or role. See our
            [guide to system prompts](https://docs.anthropic.com/en/docs/system-prompts).
          oneOf:
            - type: string
              description: A single text block.
            - type: array
              description: An array of content blocks.
              items:
                $ref: "#/components/schemas/Block"
        temperature:
          type: number
          description: |
            Amount of randomness injected into the response.

            Defaults to `1.0`. Ranges from `0.0` to `1.0`. Use `temperature` closer to `0.0`
            for analytical / multiple choice, and closer to `1.0` for creative and
            generative tasks.

            Note that even with `temperature` of `0.0`, the results will not be fully
            deterministic.
        tool_choice:
          $ref: '#/components/schemas/ToolChoice'
        tools:
          type: array
          description: |
            Definitions of tools that the model may use.
            
            If you include `tools` in your API request, the model may return `tool_use`
            content blocks that represent the model's use of those tools. You can then run
            those tools using the tool input generated by the model and then optionally
            return results back to the model using `tool_result` content blocks.
            
            Each tool definition includes:
            
            - `name`: Name of the tool.
            - `description`: Optional, but strongly-recommended description of the tool.
            - `input_schema`: [JSON schema](https://json-schema.org/) for the tool `input`
              shape that the model will produce in `tool_use` output content blocks.
            
            For example, if you defined `tools` as:
            
            ```json
            [
              {
                "name": "get_stock_price",
                "description": "Get the current stock price for a given ticker symbol.",
                "input_schema": {
                  "type": "object",
                  "properties": {
                    "ticker": {
                      "type": "string",
                      "description": "The stock ticker symbol, e.g. AAPL for Apple Inc."
                    }
                  },
                  "required": ["ticker"]
                }
              }
            ]
            ```
            
            And then asked the model "What's the S&P 500 at today?", the model might produce
            `tool_use` content blocks in the response like this:
            
            ```json
            [
              {
                "type": "tool_use",
                "id": "toolu_01D7FLrfh4GYq7yT1ULFeyMV",
                "name": "get_stock_price",
                "input": { "ticker": "^GSPC" }
              }
            ]
            ```
            
            You might then run your `get_stock_price` tool with `{"ticker": "^GSPC"}` as an
            input, and return the following back to the model in a subsequent `user`
            message:
            
            ```json
            [
              {
                "type": "tool_result",
                "tool_use_id": "toolu_01D7FLrfh4GYq7yT1ULFeyMV",
                "content": "259.75 USD"
              }
            ]
            ```
            
            Tools can be used for workflows that include running client-side tools and
            functions, or more generally whenever you want the model to produce a particular
            JSON structure of output.
            
            See our [guide](https://docs.anthropic.com/en/docs/tool-use) for more details.
          items:
            $ref: '#/components/schemas/Tool'
        top_k:
          type: integer
          description: |
            Only sample from the top K options for each subsequent token.

            Used to remove "long tail" low probability responses.
            [Learn more technical details here](https://towardsdatascience.com/how-to-sample-from-language-models-682bceb97277).

            Recommended for advanced use cases only. You usually only need to use
            `temperature`.
        top_p:
          type: number
          description: |
            Use nucleus sampling.

            In nucleus sampling, we compute the cumulative distribution over all the options
            for each subsequent token in decreasing probability order and cut it off once it
            reaches a particular probability specified by `top_p`. You should either alter
            `temperature` or `top_p`, but not both.

            Recommended for advanced use cases only. You usually only need to use
            `temperature`.
        stream:
          type: boolean
          default: false
          description: |
            Whether to incrementally stream the response using server-sent events.

            See [streaming](https://docs.anthropic.com/en/api/messages-streaming) for
            details.
        thinking:
          $ref: '#/components/schemas/ThinkingConfig'
      required:
        - model
        - messages
        - max_tokens
    CountMessageTokensRequest:
      type: object
      description: The request parameters for counting tokens in a message.
      properties:
        model:
          title: Model
          description: |
            The model that will complete your prompt.

            See [models](https://docs.anthropic.com/en/docs/models-overview) for additional
            details and options.
          example: "claude-3-5-sonnet-20241022"
          anyOf:
            - type: string
              description: The ID of the model to use for this request.
            - type: string
              title: Models
              description: |
                Available models. Mind that the list may not be exhaustive nor up-to-date.
              enum:
                - claude-opus-4-20250514
                - claude-sonnet-4-20250514
                - claude-3-7-sonnet-latest
                - claude-3-7-sonnet-20250219
                - claude-3-5-sonnet-latest
                - claude-3-5-sonnet-20241022
                - claude-3-5-sonnet-20240620
                - claude-3-5-haiku-latest
                - claude-3-5-haiku-20241022
                - claude-3-opus-latest
                - claude-3-opus-20240229
                - claude-3-sonnet-20240229
                - claude-3-haiku-20240307
                - claude-2.1
                - claude-2.0
        messages:
          type: array
          description: |
            Input messages.

            Our models are trained to operate on alternating `user` and `assistant`
            conversational turns. When creating a new `Message`, you specify the prior
            conversational turns with the `messages` parameter, and the model then generates
            the next `Message` in the conversation.

            Each input message must be an object with a `role` and `content`. You can
            specify a single `user`-role message, or you can include multiple `user` and
            `assistant` messages. The first message must always use the `user` role.

            If the final message uses the `assistant` role, the response content will
            continue immediately from the content in that message. This can be used to
            constrain part of the model's response.
          minItems: 1
          items:
            $ref: '#/components/schemas/Message'
        system:
          description: |
            System prompt.

            A system prompt is a way of providing context and instructions to Claude, such
            as specifying a particular goal or role. See our
            [guide to system prompts](https://docs.anthropic.com/en/docs/system-prompts).
          oneOf:
            - type: string
              description: A single text block.
            - type: array
              description: An array of content blocks.
              items:
                $ref: "#/components/schemas/Block"
        tool_choice:
          $ref: '#/components/schemas/ToolChoice'
        tools:
          type: array
          description: |
            Definitions of tools that the model may use.

            If you include `tools` in your API request, the model may return `tool_use`
            content blocks that represent the model's use of those tools. You can then run
            those tools using the tool input generated by the model and then optionally
            return results back to the model using `tool_result` content blocks.
          items:
            $ref: '#/components/schemas/Tool'
        thinking:
          $ref: '#/components/schemas/ThinkingConfig'
      required:
        - model
        - messages
    CountMessageTokensResponse:
      type: object
      description: The response containing the token count.
      properties:
        input_tokens:
          type: integer
          description: |
            The total number of tokens across the provided list of messages, system prompt,
            and tools.
      required:
        - input_tokens
    CreateMessageRequestMetadata:
      type: object
      description: An object describing metadata about the request.
      properties:
        user_id:
          type: string
          description: |
            An external identifier for the user who is associated with the request.

            This should be a uuid, hash value, or other opaque identifier. Anthropic may use
            this id to help detect abuse. Do not include any identifying information such as
            name, email address, or phone number.
    ToolChoice:
      type: object
      description: |
        How the model should use the provided tools. The model can use a specific tool, 
        any available tool, or decide by itself.
        
        - `auto`: allows Claude to decide whether to call any provided tools or not. This is the default value.
        - `any`: tells Claude that it must use one of the provided tools, but doesn’t force a particular tool.
        - `tool`: allows us to force Claude to always use a particular tool specified in the `name` field.
      properties:
        type:
          $ref: "#/components/schemas/ToolChoiceType"
        name:
          type: string
          description: The name of the tool to use.
        disable_parallel_tool_use:
          description: Whether to disable parallel tool use.
          type: boolean
      required:
        - type
    ToolChoiceType:
      type: string
      description: |
        How the model should use the provided tools. The model can use a specific tool,
        any available tool, or decide by itself.

        - `auto`: allows Claude to decide whether to call any provided tools or not. This is the default value.
        - `any`: tells Claude that it must use one of the provided tools, but doesn't force a particular tool.
        - `tool`: allows us to force Claude to always use a particular tool specified in the `name` field.
      enum:
        - auto
        - any
        - tool
    ThinkingConfig:
      type: object
      description: |
        Configuration for enabling Claude's extended thinking. When enabled, responses
        include `thinking` content blocks showing Claude's thinking process before the
        final answer. Requires a minimum budget of 1,024 tokens and counts towards your
        `max_tokens` limit.
      oneOf:
        - $ref: "#/components/schemas/ThinkingConfigEnabled"
        - $ref: "#/components/schemas/ThinkingConfigDisabled"
      discriminator:
        propertyName: type
        mapping:
          enabled: "#/components/schemas/ThinkingConfigEnabled"
          disabled: "#/components/schemas/ThinkingConfigDisabled"
    ThinkingConfigEnabled:
      type: object
      description: Configuration for enabling Claude's extended thinking.
      properties:
        type:
          type: string
          description: The type of thinking configuration.
          enum:
            - enabled
          default: enabled
        budget_tokens:
          type: integer
          description: |
            The maximum number of tokens Claude can use for internal reasoning.
            Must be at least 1,024 and less than `max_tokens`. Larger budgets
            enable more comprehensive reasoning.
          minimum: 1024
      required:
        - type
        - budget_tokens
    ThinkingConfigDisabled:
      type: object
      description: Configuration for disabling Claude's extended thinking.
      properties:
        type:
          type: string
          description: The type of thinking configuration.
          enum:
            - disabled
          default: disabled
      required:
        - type
    Message:
      type: object
      description: A message in a chat conversation.
      properties:
        id:
          type: string
          description: |
            Unique object identifier.

            The format and length of IDs may change over time.
        content:
          description: The content of the message.
          oneOf:
            - type: string
              description: A single text block.
            - type: array
              description: An array of content blocks.
              items:
                $ref: "#/components/schemas/Block"
        role:
          $ref: "#/components/schemas/MessageRole"
        model:
          type: string
          description: The model that handled the request.
        stop_reason:
          $ref: "#/components/schemas/StopReason"
        stop_sequence:
          type: string
          description: |
            Which custom stop sequence was generated, if any.

            This value will be a non-null string if one of your custom stop sequences was
            generated.
        type:
          type: string
          description: |
            Object type.

            For Messages, this is always `"message"`.
        usage:
          $ref: "#/components/schemas/Usage"
      required:
        - content
        - role
    MessageRole:
      type: string
      description: The role of the messages author.
      enum:
        - user
        - assistant
    Tool:
      description: A tool the model may use.
      oneOf:
        - $ref: "#/components/schemas/ToolCustom"
        - $ref: "#/components/schemas/ToolComputerUse"
        - $ref: "#/components/schemas/ToolTextEditor"
        - $ref: "#/components/schemas/ToolBash"
        - $ref: "#/components/schemas/ToolWebSearch"
        - $ref: "#/components/schemas/ToolCodeExecution"
        - $ref: "#/components/schemas/ToolMcp"
      discriminator:
        propertyName: type
        mapping:
          custom: "#/components/schemas/ToolCustom"
          computer_20241022: "#/components/schemas/ToolComputerUse"
          text_editor_20241022: "#/components/schemas/ToolTextEditor"
          bash_20241022: "#/components/schemas/ToolBash"
          web_search_20250305: "#/components/schemas/ToolWebSearch"
          code_execution_20250522: "#/components/schemas/ToolCodeExecution"
          mcp: "#/components/schemas/ToolMcp"
    ToolCustom:
      type: object
      description: A custom tool the model may use.
      properties:
        type:
          type: string
          description: The type of tool.
          default: null
        name:
          type: string
          description: The name of the tool. Must match the regex `^[a-zA-Z0-9_-]{1,64}$`.
        description:
          type: string
          description: |
            Description of what this tool does.
            
            Tool descriptions should be as detailed as possible. The more information that
            the model has about what the tool is and how to use it, the better it will
            perform. You can use natural language descriptions to reinforce important
            aspects of the tool input JSON schema.
        input_schema:
          type: object
          description: |
            [JSON schema](https://json-schema.org/) for this tool's input.
            
            This defines the shape of the `input` that your tool accepts and that the model
            will produce.
          additionalProperties: true
      required:
        - name
        - input_schema
    ToolComputerUse:
      type: object
      description: A tool that uses a mouse and keyboard to interact with a computer, and take screenshots.
      properties:
        type:
          type: string
          description: The type of tool.
          default: computer_20241022
        name:
          type: string
          description: The name of the tool.
          default: computer
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
        display_width_px:
          type: integer
          description: The width of the display in pixels.
        display_height_px:
          type: integer
          description: The height of the display in pixels.
        display_number:
          type: integer
          nullable: true
          description: The number of the display to use.
      required:
        - display_width_px
        - display_height_px
    ToolTextEditor:
      type: object
      description: A tool for viewing, creating and editing files.
      properties:
        type:
          type: string
          description: The type of tool.
          default: text_editor_20241022
        name:
          type: string
          description: The name of the tool.
          default: str_replace_editor
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
    ToolBash:
      type: object
      description: A tool for running commands in a bash shell.
      properties:
        type:
          type: string
          description: The type of tool.
          default: bash_20241022
        name:
          type: string
          description: The name of the tool.
          default: bash
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
    ToolWebSearch:
      type: object
      description: A tool for searching the web.
      properties:
        type:
          type: string
          description: The type of tool.
          default: web_search_20250305
        name:
          type: string
          description: The name of the tool.
          default: web_search
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
        max_uses:
          type: integer
          nullable: true
          description: Maximum number of times the tool can be used in the API request.
        allowed_domains:
          type: array
          nullable: true
          description: |
            If provided, only these domains will be included in results.
            Cannot be used alongside `blocked_domains`.
          items:
            type: string
        blocked_domains:
          type: array
          nullable: true
          description: |
            If provided, these domains will never appear in results.
            Cannot be used alongside `allowed_domains`.
          items:
            type: string
        user_location:
          $ref: "#/components/schemas/WebSearchUserLocation"
      required:
        - type
        - name
    WebSearchUserLocation:
      type: object
      nullable: true
      description: User location information for web search.
      properties:
        type:
          type: string
          description: The type of location.
          default: approximate
        city:
          type: string
          nullable: true
          description: The city name.
        region:
          type: string
          nullable: true
          description: The region or state name.
        country:
          type: string
          nullable: true
          description: The country code (ISO 3166-1 alpha-2).
        timezone:
          type: string
          nullable: true
          description: The timezone (IANA timezone ID).
    ToolCodeExecution:
      type: object
      description: A tool for executing code in a sandboxed environment.
      properties:
        type:
          type: string
          description: The type of tool.
          default: code_execution_20250522
        name:
          type: string
          description: The name of the tool.
          default: code_execution
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - type
        - name
    ToolMcp:
      type: object
      description: A tool representing an MCP (Model Context Protocol) server configuration.
      properties:
        type:
          type: string
          description: The type of tool.
          default: mcp
        name:
          type: string
          description: The name of the MCP tool.
        server_label:
          type: string
          description: A label identifying the MCP server.
        server_url:
          type: string
          description: The URL of the MCP server.
        allowed_tools:
          type: array
          nullable: true
          description: List of allowed tool names from the MCP server.
          items:
            type: string
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - type
        - name
        - server_label
        - server_url
    Block:
      description: A block of content in a message.
      oneOf:
        - $ref: "#/components/schemas/TextBlock"
        - $ref: "#/components/schemas/ImageBlock"
        - $ref: "#/components/schemas/DocumentBlock"
        - $ref: "#/components/schemas/ToolUseBlock"
        - $ref: "#/components/schemas/ToolResultBlock"
        - $ref: "#/components/schemas/ThinkingBlock"
        - $ref: "#/components/schemas/RedactedThinkingBlock"
        - $ref: "#/components/schemas/ServerToolUseBlock"
        - $ref: "#/components/schemas/WebSearchToolResultBlock"
        - $ref: "#/components/schemas/MCPToolUseBlock"
        - $ref: "#/components/schemas/MCPToolResultBlock"
        - $ref: "#/components/schemas/SearchResultBlock"
        - $ref: "#/components/schemas/CodeExecutionToolResultBlock"
        - $ref: "#/components/schemas/ContainerUploadBlock"
      discriminator:
        propertyName: type
        mapping:
          text: "#/components/schemas/TextBlock"
          image: "#/components/schemas/ImageBlock"
          document: "#/components/schemas/DocumentBlock"
          tool_use: "#/components/schemas/ToolUseBlock"
          tool_result: "#/components/schemas/ToolResultBlock"
          thinking: "#/components/schemas/ThinkingBlock"
          redacted_thinking: "#/components/schemas/RedactedThinkingBlock"
          server_tool_use: "#/components/schemas/ServerToolUseBlock"
          web_search_tool_result: "#/components/schemas/WebSearchToolResultBlock"
          mcp_tool_use: "#/components/schemas/MCPToolUseBlock"
          mcp_tool_result: "#/components/schemas/MCPToolResultBlock"
          search_result: "#/components/schemas/SearchResultBlock"
          code_execution_tool_result: "#/components/schemas/CodeExecutionToolResultBlock"
          container_upload: "#/components/schemas/ContainerUploadBlock"
    TextBlock:
      type: object
      description: A block of text content.
      properties:
        text:
          type: string
          description: The text content.
        type:
          type: string
          description: The type of content block.
          default: text
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - text
    ImageBlock:
      type: object
      description: A block of image content.
      properties:
        source:
          $ref: "#/components/schemas/ImageBlockSource"
        type:
          type: string
          description: The type of content block.
          default: image
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - source
    ImageBlockSource:
      description: The source of an image block.
      oneOf:
        - $ref: "#/components/schemas/Base64ImageSource"
        - $ref: "#/components/schemas/UrlImageSource"
      discriminator:
        propertyName: type
        mapping:
          base64: "#/components/schemas/Base64ImageSource"
          url: "#/components/schemas/UrlImageSource"
    Base64ImageSource:
      type: object
      description: An image source using base64-encoded data.
      properties:
        type:
          type: string
          description: The type of image source.
          default: base64
        media_type:
          type: string
          description: The media type of the image.
          enum:
            - image/jpeg
            - image/png
            - image/gif
            - image/webp
        data:
          type: string
          description: The base64-encoded image data.
      required:
        - type
        - media_type
        - data
    UrlImageSource:
      type: object
      description: An image source using a URL.
      properties:
        type:
          type: string
          description: The type of image source.
          default: url
        url:
          type: string
          description: The URL of the image.
      required:
        - type
        - url
    DocumentBlock:
      type: object
      description: |
        A block of document content. Documents can be provided as base64-encoded data,
        plain text, URLs, or references to content blocks.
      properties:
        type:
          type: string
          description: The type of content block.
          default: document
        source:
          $ref: "#/components/schemas/DocumentBlockSource"
        title:
          type: string
          nullable: true
          description: The title of the document.
        context:
          type: string
          nullable: true
          description: Additional context about the document.
        citations:
          $ref: "#/components/schemas/CitationsConfig"
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - type
        - source
    DocumentBlockSource:
      description: The source of a document block.
      oneOf:
        - $ref: "#/components/schemas/Base64PdfSource"
        - $ref: "#/components/schemas/PlainTextSource"
        - $ref: "#/components/schemas/ContentBlockSource"
        - $ref: "#/components/schemas/UrlPdfSource"
      discriminator:
        propertyName: type
        mapping:
          base64: "#/components/schemas/Base64PdfSource"
          text: "#/components/schemas/PlainTextSource"
          content: "#/components/schemas/ContentBlockSource"
          url: "#/components/schemas/UrlPdfSource"
    Base64PdfSource:
      type: object
      description: A document source using base64-encoded PDF data.
      properties:
        type:
          type: string
          description: The type of document source.
          default: base64
        media_type:
          type: string
          description: The media type of the document.
          enum:
            - application/pdf
        data:
          type: string
          description: The base64-encoded PDF data.
      required:
        - type
        - media_type
        - data
    PlainTextSource:
      type: object
      description: A document source using plain text.
      properties:
        type:
          type: string
          description: The type of document source.
          default: text
        media_type:
          type: string
          description: The media type of the content.
          enum:
            - text/plain
        data:
          type: string
          description: The text content.
      required:
        - type
        - media_type
        - data
    ContentBlockSource:
      type: object
      description: A document source referencing a content block.
      properties:
        type:
          type: string
          description: The type of document source.
          default: content
        content:
          type: string
          description: The content block reference.
      required:
        - type
        - content
    UrlPdfSource:
      type: object
      description: A document source using a URL to a PDF.
      properties:
        type:
          type: string
          description: The type of document source.
          default: url
        url:
          type: string
          description: The URL of the PDF document.
      required:
        - type
        - url
    CitationsConfig:
      type: object
      nullable: true
      description: Configuration for document citations.
      properties:
        enabled:
          type: boolean
          description: Whether citations are enabled.
    ToolUseBlock:
      type: object
      description: The tool the model wants to use.
      properties:
        id:
          type: string
          description: |
            A unique identifier for this particular tool use block. 
            This will be used to match up the tool results later.
          example: toolu_01A09q90qw90lq917835lq9
        name:
          type: string
          description: The name of the tool being used.
          example: get_weather
        input:
          type: object
          description: An object containing the input being passed to the tool, conforming to the tool's `input_schema`.
          additionalProperties: true
        type:
          type: string
          description: The type of content block.
          default: tool_use
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - id
        - name
        - input
    ToolResultBlock:
      type: object
      description: The result of using a tool.
      properties:
        tool_use_id:
          type: string
          description: The `id` of the tool use request this is a result for.
        content:
          description: |
            The result of the tool, as a string (e.g. `"content": "15 degrees"`) 
            or list of nested content blocks (e.g. `"content": [{"type": "text", "text": "15 degrees"}]`). 
            These content blocks can use the text or image types.
          oneOf:
            - type: string
              description: A single text block.
            - type: array
              description: An array of content blocks.
              items:
                $ref: "#/components/schemas/Block"
        is_error:
          type: boolean
          description: Set to `true` if the tool execution resulted in an error.
        type:
          type: string
          description: The type of content block.
          default: tool_result
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - tool_use_id
        - content
    ThinkingBlock:
      type: object
      description: |
        A block containing Claude's internal thinking process. This block type
        appears when extended thinking is enabled via the `thinking` parameter.
      properties:
        type:
          type: string
          description: The type of content block.
          enum:
            - thinking
          default: thinking
        thinking:
          type: string
          description: |
            The text of Claude's internal reasoning and thinking process. This shows
            how Claude approached and analyzed the problem before providing a final answer.
        signature:
          type: string
          description: |
            Optional cryptographic signature for the thinking block to verify its
            authenticity and integrity.
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - type
        - thinking
    RedactedThinkingBlock:
      type: object
      description: |
        A block representing thinking content that has been redacted for security
        or safety reasons. This block type appears when Claude's internal thinking
        process contained content that was redacted.
      properties:
        type:
          type: string
          description: The type of content block.
          enum:
            - redacted_thinking
          default: redacted_thinking
        data:
          type: string
          description: |
            Encrypted or opaque data representing the redacted thinking content.
            This data cannot be decrypted by the client.
      required:
        - type
        - data
    ServerToolUseBlock:
      type: object
      description: |
        A block representing server-side tool use. This is used for tools that are
        executed by the API server rather than the client, such as web search.
      properties:
        type:
          type: string
          description: The type of content block.
          default: server_tool_use
        id:
          type: string
          description: Unique identifier for this tool use instance.
        name:
          type: string
          description: The name of the server tool being used.
        input:
          type: object
          additionalProperties: true
          description: The input parameters for the tool.
      required:
        - type
        - id
        - name
        - input
    WebSearchToolResultBlock:
      type: object
      description: |
        A block containing web search results from the web search tool.
      properties:
        type:
          type: string
          description: The type of content block.
          default: web_search_tool_result
        tool_use_id:
          type: string
          description: The ID of the tool use that generated these results.
        content:
          description: The search results or an error.
          oneOf:
            - $ref: "#/components/schemas/WebSearchToolResultError"
            - type: array
              items:
                $ref: "#/components/schemas/WebSearchResultBlock"
      required:
        - type
        - tool_use_id
        - content
    WebSearchToolResultError:
      type: object
      description: An error from the web search tool.
      properties:
        type:
          type: string
          description: The type of error block.
          default: web_search_tool_result_error
        error_code:
          $ref: "#/components/schemas/WebSearchToolResultErrorCode"
      required:
        - type
        - error_code
    WebSearchToolResultErrorCode:
      type: string
      description: The error code for a web search tool result error.
      enum:
        - invalid_request
        - unavailable
        - max_uses_exceeded
        - too_many_requests
        - query_too_long
        - filtered
        - internal_error
    WebSearchResultBlock:
      type: object
      description: A single web search result.
      properties:
        type:
          type: string
          description: The type of block.
          default: web_search_result
        title:
          type: string
          description: The title of the search result.
        url:
          type: string
          description: The URL of the search result.
        encrypted_content:
          type: string
          description: Encrypted content from the search result.
        page_age:
          type: string
          nullable: true
          description: The age of the page.
      required:
        - type
        - title
        - url
        - encrypted_content
    MCPToolUseBlock:
      type: object
      description: |
        A block representing MCP (Model Context Protocol) tool use.
      properties:
        type:
          type: string
          description: The type of content block.
          default: mcp_tool_use
        id:
          type: string
          description: Unique identifier for this MCP tool use.
        server_name:
          type: string
          description: The name of the MCP server.
        name:
          type: string
          description: The name of the MCP tool being used.
        input:
          type: object
          additionalProperties: true
          description: The input parameters for the MCP tool.
      required:
        - type
        - id
        - server_name
        - name
        - input
    MCPToolResultBlock:
      type: object
      description: |
        A block containing the result of an MCP tool execution.
      properties:
        type:
          type: string
          description: The type of content block.
          default: mcp_tool_result
        tool_use_id:
          type: string
          description: The ID of the MCP tool use that generated this result.
        is_error:
          type: boolean
          description: Whether the tool execution resulted in an error.
        content:
          type: array
          description: The content of the tool result.
          items:
            $ref: "#/components/schemas/MCPToolResultContent"
      required:
        - type
        - tool_use_id
    MCPToolResultContent:
      type: object
      description: Content within an MCP tool result.
      properties:
        type:
          type: string
          description: The type of content.
        text:
          type: string
          description: The text content.
      required:
        - type
    SearchResultBlock:
      type: object
      description: |
        A search result block containing source, title, and content from search operations.
      properties:
        type:
          type: string
          description: The type of content block.
          default: search_result
        source:
          type: string
          description: The source URL or identifier.
        title:
          type: string
          description: The title of the search result.
        content:
          type: array
          description: The content of the search result.
          items:
            $ref: "#/components/schemas/TextBlock"
        citations:
          $ref: "#/components/schemas/CitationsConfig"
        cache_control:
          $ref: "#/components/schemas/CacheControlEphemeral"
      required:
        - type
        - source
        - title
        - content
    CodeExecutionToolResultBlock:
      type: object
      description: |
        A block containing the result of code execution.
      properties:
        type:
          type: string
          description: The type of content block.
          default: code_execution_tool_result
        tool_use_id:
          type: string
          description: The ID of the tool use that generated this result.
        content:
          description: The code execution result or an error.
          oneOf:
            - $ref: "#/components/schemas/CodeExecutionResultBlock"
            - $ref: "#/components/schemas/CodeExecutionToolResultError"
      required:
        - type
        - tool_use_id
        - content
    CodeExecutionResultBlock:
      type: object
      description: The result of successful code execution.
      properties:
        type:
          type: string
          description: The type of block.
          default: code_execution_result
        return_code:
          type: integer
          description: The return code of the execution.
        stdout:
          type: string
          description: The standard output from execution.
        stderr:
          type: string
          description: The standard error from execution.
        content:
          type: array
          description: Additional content from the execution.
          items:
            $ref: "#/components/schemas/CodeExecutionOutputBlock"
      required:
        - type
        - return_code
        - stdout
        - stderr
    CodeExecutionOutputBlock:
      type: object
      description: Output content from code execution.
      properties:
        type:
          type: string
          description: The type of output.
        file_id:
          type: string
          description: The file ID for the output.
      required:
        - type
        - file_id
    CodeExecutionToolResultError:
      type: object
      description: An error from code execution.
      properties:
        type:
          type: string
          description: The type of error block.
          default: code_execution_tool_result_error
        error_code:
          $ref: "#/components/schemas/CodeExecutionToolResultErrorCode"
      required:
        - type
        - error_code
    CodeExecutionToolResultErrorCode:
      type: string
      description: The error code for a code execution tool result error.
      enum:
        - invalid_request
        - unavailable
        - max_duration_exceeded
        - internal_error
    ContainerUploadBlock:
      type: object
      description: |
        A block representing a file uploaded to a container.
      properties:
        type:
          type: string
          description: The type of content block.
          default: container_upload
        file_id:
          type: string
          description: The unique identifier for the uploaded file.
        filename:
          type: string
          description: The name of the uploaded file.
        file_size:
          type: integer
          description: The size of the file in bytes.
        content:
          type: string
          description: The content of the file.
      required:
        - type
        - file_id
        - filename
        - file_size
    CacheControlEphemeral:
      type: object
      description: The cache control settings.
      properties:
        type:
          enum:
            - ephemeral
          type: string
          default: ephemeral
        ttl:
          type: integer
          nullable: true
          description: |
            The time-to-live for the cache entry in seconds. If not provided, the
            default TTL will be used (typically 5 minutes).
    StopReason:
      type: string
      description: |
        The reason that we stopped.

        This may be one the following values:

        - `"end_turn"`: the model reached a natural stopping point
        - `"max_tokens"`: we exceeded the requested `max_tokens` or the model's maximum
        - `"stop_sequence"`: one of your provided custom `stop_sequences` was generated
        - `"tool_use"`: the model invoked one or more tools
        - `"pause_turn"`: the model paused its turn for a multi-turn interaction
        - `"refusal"`: the model refused to generate a response

        In non-streaming mode this value is always non-null. In streaming mode, it is
        null in the `message_start` event and non-null otherwise.
      nullable: true
      enum:
        - end_turn
        - max_tokens
        - stop_sequence
        - tool_use
        - pause_turn
        - refusal
    Usage:
      type: object
      description: |
        Billing and rate-limit usage.
        
        Anthropic's API bills and rate-limits by token counts, as tokens represent the
        underlying cost to our systems.
        
        Under the hood, the API transforms requests into a format suitable for the
        model. The model's output then goes through a parsing stage before becoming an
        API response. As a result, the token counts in `usage` will not match one-to-one
        with the exact visible content of an API request or response.
        
        For example, `output_tokens` will be non-zero, even for an empty string response
        from Claude.
      properties:
        input_tokens:
          type: integer
          description: The number of input tokens which were used.
        output_tokens:
          type: integer
          description: The number of output tokens which were used.
        cache_creation_input_tokens:
          type: integer
          nullable: true
          description: The number of input tokens used to create the cache entry.
        cache_read_input_tokens:
          type: integer
          nullable: true
          description: The number of input tokens read from the cache.
        server_tool_use:
          $ref: "#/components/schemas/ServerToolUsage"
        service_tier:
          $ref: "#/components/schemas/ServiceTier"
      required:
        - input_tokens
        - output_tokens
    ServerToolUsage:
      type: object
      nullable: true
      description: Usage information for server-side tool execution.
      properties:
        web_search_requests:
          type: integer
          nullable: true
          description: The number of web search requests made during tool execution.
    ServiceTier:
      type: string
      nullable: true
      description: |
        The service tier used to process the request. Can be used for billing and
        rate limiting purposes.
      enum:
        - standard
        - priority
    CreateMessageBatchRequest:
      type: object
      description: The request parameters for creating a message batch.
      properties:
        requests:
          type: array
          description: List of requests for prompt completion. Each is an individual request to create a Message.
          items:
            $ref: "#/components/schemas/BatchMessageRequest"
      required:
        - requests
    BatchMessageRequest:
      type: object
      description: An individual message request within a batch.
      properties:
        custom_id:
          type: string
          description: |
            Developer-provided ID created for each request in a Message Batch. Useful for
            matching results to requests, as results may be given out of request order.

            Must be unique for each request within the Message Batch.
        params:
          $ref: "#/components/schemas/CreateMessageRequest"
      required:
        - custom_id
        - params
    MessageBatch:
      type: object
      description: A batch of message requests.
      properties:
        id:
          type: string
          description: Unique object identifier for the message batch.
        created_at:
          type: string
          format: date-time
          description: RFC 3339 datetime string representing the time at which the Message Batch was created.
        expires_at:
          type: string
          format: date-time
          description: RFC 3339 datetime string representing the time at which the Message Batch will expire and end processing, which is 24 hours after creation.
        processing_status:
          type: string
          enum:
            - in_progress
            - canceling
            - ended
          description: Processing status of the Message Batch.
        request_counts:
          $ref: "#/components/schemas/MessageBatchRequestCounts"
        results_url:
          type: string
          nullable: true
          description: URL to a `.jsonl` file containing the results of the Message Batch requests. Specified only once processing ends.
        ended_at:
          type: string
          format: date-time
          nullable: true
          description: RFC 3339 datetime string representing the time at which processing for the Message Batch ended. Specified only once processing ends.
        archived_at:
          type: string
          format: date-time
          nullable: true
          description: RFC 3339 datetime string representing the time at which the Message Batch was archived and its results became unavailable.
        cancel_initiated_at:
          type: string
          format: date-time
          nullable: true
          description: RFC 3339 datetime string representing the time at which cancellation of the Message Batch was initiated. Specified only if cancellation was initiated.
        type:
          type: string
          enum:
            - message_batch
          description: Object type. For Message Batches, this is always `"message_batch"`.
      required:
        - id
        - created_at
        - expires_at
        - processing_status
        - request_counts
        - type
    DeleteMessageBatchResponse:
      type: object
      description: Response returned when a message batch is deleted.
      properties:
        id:
          type: string
          description: ID of the deleted Message Batch.
        type:
          type: string
          enum:
            - message_batch_deleted
          description: Deleted object type. Always `"message_batch_deleted"`.
      required:
        - id
        - type
    MessageBatchIndividualResponse:
      type: object
      description: An individual result from a Message Batch.
      properties:
        custom_id:
          type: string
          description: |
            Developer-provided ID created for each request in a Message Batch.
            Useful for matching results to requests.
        result:
          $ref: "#/components/schemas/MessageBatchResult"
      required:
        - custom_id
        - result
    MessageBatchResult:
      type: object
      description: |
        The result of processing a request in a Message Batch.
        Can be succeeded, errored, canceled, or expired.
      oneOf:
        - $ref: "#/components/schemas/MessageBatchSucceededResult"
        - $ref: "#/components/schemas/MessageBatchErroredResult"
        - $ref: "#/components/schemas/MessageBatchCanceledResult"
        - $ref: "#/components/schemas/MessageBatchExpiredResult"
      discriminator:
        propertyName: type
        mapping:
          succeeded: "#/components/schemas/MessageBatchSucceededResult"
          errored: "#/components/schemas/MessageBatchErroredResult"
          canceled: "#/components/schemas/MessageBatchCanceledResult"
          expired: "#/components/schemas/MessageBatchExpiredResult"
    MessageBatchSucceededResult:
      type: object
      description: Result of a successfully completed request.
      properties:
        type:
          type: string
          description: The result type.
          default: succeeded
        message:
          $ref: "#/components/schemas/Message"
      required:
        - type
        - message
    MessageBatchErroredResult:
      type: object
      description: Result of a request that encountered an error.
      properties:
        type:
          type: string
          description: The result type.
          default: errored
        error:
          $ref: "#/components/schemas/Error"
      required:
        - type
        - error
    MessageBatchCanceledResult:
      type: object
      description: Result of a request that was canceled.
      properties:
        type:
          type: string
          description: The result type.
          default: canceled
      required:
        - type
    MessageBatchExpiredResult:
      type: object
      description: Result of a request that expired.
      properties:
        type:
          type: string
          description: The result type.
          default: expired
      required:
        - type
    ListMessageBatchesResponse:
      type: object
      description: Response containing a list of message batches.
      properties:
        data:
          type: array
          description: List of MessageBatch objects.
          items:
            $ref: "#/components/schemas/MessageBatch"
        has_more:
          type: boolean
          description: |
            Indicates if there are more results in the requested page direction.
        first_id:
          type: string
          nullable: true
          description: |
            First ID in the `data` list. Can be used as the `before_id` for the previous page.
        last_id:
          type: string
          nullable: true
          description: |
            Last ID in the `data` list. Can be used as the `after_id` for the next page.
      required:
        - data
        - has_more
    ModelInfo:
      type: object
      description: Describes a model with basic information.
      properties:
        id:
          type: string
          description: Unique model identifier.
        type:
          type: string
          enum:
            - model
          description: Object type. Always `"model"` for models.
        display_name:
          type: string
          description: A human-readable name for the model.
        created_at:
          type: string
          format: date-time
          description: RFC 3339 datetime string representing the time at which the model was released. May be set to an epoch value if the release date is unknown.
      required:
        - id
        - type
        - display_name
        - created_at
    ListModelsResponse:
      type: object
      description: Response containing a list of models.
      properties:
        data:
          type: array
          description: List of ModelInfo objects.
          items:
            $ref: "#/components/schemas/ModelInfo"
        has_more:
          type: boolean
          description: |
            Indicates if there are more results in the requested page direction.
        first_id:
          type: string
          nullable: true
          description: |
            First ID in the `data` list. Can be used as the `before_id` for the previous page.
        last_id:
          type: string
          nullable: true
          description: |
            Last ID in the `data` list. Can be used as the `after_id` for the next page.
      required:
        - data
        - has_more
    MessageBatchRequestCounts:
      type: object
      description: Tallies requests within the Message Batch, categorized by their status.
      properties:
        processing:
          type: integer
          description: Number of requests in the Message Batch that are processing.
        succeeded:
          type: integer
          description: Number of requests in the Message Batch that have completed successfully.
        errored:
          type: integer
          description: Number of requests in the Message Batch that encountered an error.
        canceled:
          type: integer
          description: Number of requests in the Message Batch that have been canceled.
        expired:
          type: integer
          description: Number of requests in the Message Batch that have expired.
      required:
        - processing
        - succeeded
        - errored
        - canceled
        - expired
    MessageStreamEvent:
      type: object
      description: A event in a streaming conversation.
      oneOf:
        - $ref: "#/components/schemas/MessageStartEvent"
        - $ref: "#/components/schemas/MessageDeltaEvent"
        - $ref: "#/components/schemas/MessageStopEvent"
        - $ref: "#/components/schemas/ContentBlockStartEvent"
        - $ref: "#/components/schemas/ContentBlockDeltaEvent"
        - $ref: "#/components/schemas/ContentBlockStopEvent"
        - $ref: "#/components/schemas/PingEvent"
        - $ref: "#/components/schemas/ErrorEvent"
      discriminator:
        propertyName: type
        mapping:
            message_start: "#/components/schemas/MessageStartEvent"
            message_delta: "#/components/schemas/MessageDeltaEvent"
            message_stop: "#/components/schemas/MessageStopEvent"
            content_block_start: "#/components/schemas/ContentBlockStartEvent"
            content_block_delta: "#/components/schemas/ContentBlockDeltaEvent"
            content_block_stop: "#/components/schemas/ContentBlockStopEvent"
            ping: "#/components/schemas/PingEvent"
            error: "#/components/schemas/ErrorEvent"
    MessageStreamEventType:
      type: string
      description: The type of a streaming event.
      enum:
        - message_start
        - message_delta
        - message_stop
        - content_block_start
        - content_block_delta
        - content_block_stop
        - ping
        - error
    MessageStartEvent:
      type: object
      description: A start event in a streaming conversation.
      properties:
        message:
          $ref: "#/components/schemas/Message"
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
      required:
        - message
        - type
    MessageDeltaEvent:
      type: object
      description: A delta event in a streaming conversation.
      properties:
        delta:
          $ref: "#/components/schemas/MessageDelta"
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
        usage:
          $ref: "#/components/schemas/MessageDeltaUsage"
      required:
        - delta
        - type
        - usage
    MessageDelta:
      type: object
      description: A delta in a streaming message.
      properties:
        stop_reason:
          $ref: "#/components/schemas/StopReason"
        stop_sequence:
          type: string
          description: |
            Which custom stop sequence was generated, if any.

            This value will be a non-null string if one of your custom stop sequences was
            generated.
    MessageDeltaUsage:
      type: object
      description: |
        Billing and rate-limit usage.
        
        Anthropic's API bills and rate-limits by token counts, as tokens represent the
        underlying cost to our systems.
        
        Under the hood, the API transforms requests into a format suitable for the
        model. The model's output then goes through a parsing stage before becoming an
        API response. As a result, the token counts in `usage` will not match one-to-one
        with the exact visible content of an API request or response.
        
        For example, `output_tokens` will be non-zero, even for an empty string response
        from Claude.
      properties:
        output_tokens:
          type: integer
          description: The cumulative number of output tokens which were used.
      required:
        - output_tokens
    MessageStopEvent:
      type: object
      description: A stop event in a streaming conversation.
      properties:
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
      required:
        - type
    ContentBlockStartEvent:
      type: object
      description: A start event in a streaming content block.
      properties:
        content_block:
          $ref: "#/components/schemas/Block"
        index:
          type: integer
          description: The index of the content block.
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
      required:
        - content_block
        - index
        - type
    ContentBlockDeltaEvent:
      type: object
      description: A delta event in a streaming content block.
      properties:
        delta:
          $ref: "#/components/schemas/BlockDelta"
        index:
          type: integer
          description: The index of the content block.
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
      required:
        - delta
        - index
        - type
    BlockDelta:
      description: A delta in a streaming message.
      oneOf:
        - $ref: "#/components/schemas/TextBlockDelta"
        - $ref: "#/components/schemas/InputJsonBlockDelta"
        - $ref: "#/components/schemas/ThinkingBlockDelta"
      discriminator:
        propertyName: type
        mapping:
          text_delta: "#/components/schemas/TextBlockDelta"
          input_json_delta: "#/components/schemas/InputJsonBlockDelta"
          thinking_delta: "#/components/schemas/ThinkingBlockDelta"
    TextBlockDelta:
      type: object
      description: A delta in a streaming text block.
      properties:
        text:
          type: string
          description: The text delta.
        type:
          type: string
          description: The type of content block.
          default: text_delta
      required:
        - text
        - type
    InputJsonBlockDelta:
      type: object
      description: A delta in a streaming input JSON.
      properties:
        partial_json:
          type: string
          description: The partial JSON delta.
        type:
          type: string
          description: The type of content block.
          default: input_json_delta
      required:
        - text
        - type
    ThinkingBlockDelta:
      type: object
      description: |
        A delta in a streaming thinking block. This represents incremental updates to
        Claude's internal thinking process as it is being generated.
      properties:
        thinking:
          type: string
          description: The thinking text delta.
        type:
          type: string
          description: The type of content block delta.
          enum:
            - thinking_delta
          default: thinking_delta
      required:
        - thinking
        - type
    ContentBlockStopEvent:
      type: object
      description: A stop event in a streaming content block.
      properties:
        index:
          type: integer
          description: The index of the content block.
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
      required:
        - index
        - type
    PingEvent:
      type: object
      description: A ping event in a streaming conversation.
      properties:
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
      required:
        - type
    ErrorEvent:
      type: object
      description: An error event in a streaming conversation.
      properties:
        type:
          $ref: "#/components/schemas/MessageStreamEventType"
        error:
          $ref: "#/components/schemas/Error"
      required:
          - type
          - error
    Error:
      type: object
      description: An error object.
      properties:
        type:
          type: string
          description: The type of error.
        message:
          type: string
          description: A human-readable error message.
      required:
          - type
          - message

security:
  - ApiKeyAuth: [ ]
